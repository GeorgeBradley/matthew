<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Slider</title>
    <style>
        /* CSS */
        .immediate-showcase-slider-container {
          width: 100%;
          overflow: hidden;
          position: relative;
        }

        .immediate-showcase-slider {
          display: flex;
          transition: transform 0.5s ease-in-out;
          /* No longer need a fixed width, we'll calculate in JS */
        }

        .immediate-showcase-slide {
          /* flex: 0 0 20%;  Removed fixed width, calculate dynamically */
          box-sizing: border-box;
          padding: 5px;
          flex-shrink: 0; /* Prevent slides from shrinking */
        }
        .immediate-showcase-slide img {
          width: 100%;
          height: auto;
          display: block;
        }


        .immediate-showcase-prev, .immediate-showcase-next {
          position: absolute;
          top: 50%;
          transform: translateY(-50%);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          border: none;
          padding: 10px 15px;
          cursor: pointer;
          z-index: 2;
          font-size: 1.5rem;
          transition: background-color 0.3s ease;
        }

        .immediate-showcase-prev:hover, .immediate-showcase-next:hover {
          background-color: rgba(0, 0, 0, 0.8);
        }

        .immediate-showcase-prev {
          left: 0;
        }

        .immediate-showcase-next {
          right: 0;
        }

        @media (max-width: 768px) {
          .immediate-showcase-prev, .immediate-showcase-next {
            display: none;
          }
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="immediate-showcase-slider-container">
        <div class="immediate-showcase-slider">
            <div class="immediate-showcase-slide"><img src="feature-img/feature-1.jpg" alt="Image 1"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-2.jpg" alt="Image 2"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-3.jpg" alt="Image 3"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-4.jpg" alt="Image 4"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-5.jpg" alt="Image 5"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-1.jpg" alt="Image 1"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-2.jpg" alt="Image 2"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-3.jpg" alt="Image 3"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-4.jpg" alt="Image 4"></div>
            <div class="immediate-showcase-slide"><img src="feature-img/feature-5.jpg" alt="Image 5"></div>
        </div>
        <button class="immediate-showcase-prev">&#10094;</button>
        <button class="immediate-showcase-next">&#10095;</button>
    </div>

    <script>
        // JavaScript
        $(document).ready(function() {
            const $slider = $('.immediate-showcase-slider');
            const $slides = $('.immediate-showcase-slide');
            const slideCount = $slides.length;
            let currentIdx = 0;
            let visibleSlides; // Declare visibleSlides here

            // Function to calculate and set slider width and slide widths
            function updateSliderLayout() {
                const containerWidth = $('.immediate-showcase-slider-container').width();
                visibleSlides = Math.floor(containerWidth / 200); // Assuming a minimum slide width of 200px
                visibleSlides = Math.max(1, visibleSlides);  // Ensure at least 1 slide is visible
                visibleSlides = Math.min(visibleSlides, slideCount); // Ensure we don't show more than available

                const slideWidth = containerWidth / visibleSlides;
                $slides.width(slideWidth); // Set the width of EACH slide
                $slider.width(slideWidth * slideCount); // Total width of the slider
            }


            function moveToSlide(index) {
              if (index < 0 || index > slideCount - visibleSlides) {
                    return;
                }

                currentIdx = index;
                const slideWidth = $slides.outerWidth(true); // Get *current* slide width
                const translateX = -currentIdx * slideWidth;
                $slider.css('transform', `translateX(${translateX}px)`);
            }

            $('.immediate-showcase-next').click(function() {
                if (currentIdx < slideCount - visibleSlides) {
                    moveToSlide(currentIdx + 1);
                } else {
                    moveToSlide(0);
                }
            });

            $('.immediate-showcase-prev').click(function() {
                if (currentIdx > 0) {
                    moveToSlide(currentIdx - 1);
                } else {
                    moveToSlide(slideCount - visibleSlides);
                }
            });

            // Initial setup AND resize handling
            $(window).on('resize load', function() { // Use 'load' for initial setup
                updateSliderLayout();
                moveToSlide(0); // Reset to the beginning on resize/load
            });
        });
    </script>
</body>
</html>
